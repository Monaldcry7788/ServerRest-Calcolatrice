### Configurazione Variabile Globale
@baseUrl = http://localhost:8080

# =============================================================================
# SEZIONE 1: ENDPOINTS /api/v1/ (VERSIONATI)
# =============================================================================

### 1.2 GET v1 - Sottrazione (Successo)
GET {{baseUrl}}/api/v1/calcola/get?operando1=20&operando2=8&operatore=-
Accept: application/json

> {%
    client.test("GET v1 Sottrazione", function() {
        client.assert(response.status === 200);
        client.assert(response.body.risultato === 12);
    });
%}

### 1.3 GET v1 - Errore: Operandi non numerici
GET {{baseUrl}}/api/v1/calcola/get?operando1=TEST&operando2=5&operatore=*
Accept: application/json

> {%
    client.test("GET v1 Errore Formato", function() {
        client.assert(response.status === 400);
        client.assert(response.body.errore.includes("numeri"));
    });
%}

### 1.4 POST v1 - Moltiplicazione (Successo)
POST {{baseUrl}}/api/v1/calcola/post
Content-Type: application/json

{
  "operando1": 6,
  "operando2": 7,
  "operatore": "*"
}

> {%
    client.test("POST v1 Moltiplicazione", function() {
        client.assert(response.status === 200);
        client.assert(response.body.risultato === 42);
    });
%}

### 1.5 POST v1 - Divisione (Successo)
POST {{baseUrl}}/api/v1/calcola/post
Content-Type: application/json

{
  "operando1": 100,
  "operando2": 4,
  "operatore": "/"
}

> {%
    client.test("POST v1 Divisione", function() {
        client.assert(response.status === 200);
        client.assert(response.body.risultato === 25);
    });
%}

### 2.1 GET Base - Moltiplicazione (Successo)
GET {{baseUrl}}/api/calcola/get?operando1=3&operando2=3&operatore=*
Accept: application/json

> {%
    client.test("GET Base Moltiplicazione", function() {
        client.assert(response.status === 200);
        client.assert(response.body.risultato === 9);
    });
%}

### 2.2 GET Base - Divisione (Successo)
GET {{baseUrl}}/api/calcola/get?operando1=50&operando2=2&operatore=/
Accept: application/json

> {%
    client.test("GET Base Divisione", function() {
        client.assert(response.status === 200);
        client.assert(response.body.risultato === 25);
    });
%}

### 2.3 GET Base - Errore: Parametri Mancanti
GET {{baseUrl}}/api/calcola/get?operando1=10
Accept: application/json

> {%
    client.test("GET Base Parametri Mancanti", function() {
        client.assert(response.status === 400);
        client.assert(response.body.errore.includes("Parametri mancanti"));
    });
%}

### 2.4 POST Base - Addizione (Successo)
POST {{baseUrl}}/api/calcola/post
Content-Type: application/json

{
  "operando1": 100.50,
  "operando2": 200.50,
  "operatore": "+"
}

> {%
    client.test("POST Base Addizione", function() {
        client.assert(response.status === 200);
        client.assert(response.body.risultato === 301);
    });
%}

### 2.5 POST Base - Sottrazione (Successo)
POST {{baseUrl}}/api/calcola/post
Content-Type: application/json

{
  "operando1": 50,
  "operando2": 100,
  "operatore": "-"
}

> {%
    client.test("POST Base Sottrazione", function() {
        client.assert(response.status === 200);
        client.assert(response.body.risultato === -50);
    });
%}

### 2.6 POST Base - Errore: Operatore Vuoto
POST {{baseUrl}}/api/calcola/post
Content-Type: application/json

{
  "operando1": 10,
  "operando2": 10,
  "operatore": ""
}

> {%
    client.test("POST Base Errore Operatore", function() {
        client.assert(response.status === 400);
        client.assert(response.body.errore === "Operatore mancante o vuoto");
    });
%}

### 3.1 Errore: POST su endpoint GET
POST {{baseUrl}}/api/calcola/get
Content-Type: application/json

{}

> {%
    client.test("Check Method Not Allowed su GET handler", function() {
        client.assert(response.status === 405);
        client.assert(response.body.errore.includes("Usa GET"));
    });
%}

### 3.2 Errore: GET su endpoint POST
GET {{baseUrl}}/api/v1/calcola/post?operando1=1&operando2=1&operatore=+

> {%
    client.test("Check Method Not Allowed su POST handler", function() {
        client.assert(response.status === 405);
        client.assert(response.body.errore.includes("Usa POST"));
    });
%}

### 1.1 GET V2 - Potenza (Nuovo Operatore)
GET {{baseUrl}}/api/v2/calcola/get?operando1=2&operando2=10&operatore=%5E
Accept: application/json

> {%
    client.test("V2 Potenza: Status 200", function() {
        client.assert(response.status === 200);
    });
    client.test("V2 Schema: Controllo ID e Timestamp", function() {
        client.assert(response.body.id !== undefined, "ID UUID mancante");
        client.assert(response.body.timestamp !== undefined, "Timestamp mancante");
        client.assert(response.body.risultato === 1024);
    });
%}

### 1.2 GET V2 - Radice Quadrata (Operatore Unario)
# Nota: Il tuo service usa solo operando1 per la radice
GET {{baseUrl}}/api/v2/calcola/get?operando1=16&operando2=0&operatore=RADICE
Accept: application/json

> {%
    client.test("V2 Radice: Risultato corretto", function() {
        client.assert(response.body.risultato === 4);
    });
%}

### 1.3 POST V2 - Modulo (Alias testo "MODULO")
POST {{baseUrl}}/api/v2/calcola/post
Content-Type: application/json

{
  "operando1": 10,
  "operando2": 3,
  "operatore": "MODULO"
}

> {%
    client.test("V2 Modulo: Risultato corretto", function() {
        client.assert(response.body.risultato === 1);
    });
%}

### 1.4 POST V2 - Moltiplicazione (Alias "X")
POST {{baseUrl}}/api/v2/calcola/post
Content-Type: application/json

{
  "operando1": 5,
  "operando2": 5,
  "operatore": "X"
}

> {%
    client.test("V2 Alias X: Risultato corretto", function() {
        client.assert(response.body.risultato === 25);
    });
%}

### 1.5 V2 Errore - Divisione per zero
POST {{baseUrl}}/api/v2/calcola/post
Content-Type: application/json

{
  "operando1": 10,
  "operando2": 0,
  "operatore": "/"
}

> {%
    client.test("V2 Errore: Divisione per zero", function() {
        client.assert(response.status === 400);
        client.assert(response.body.errore === "Divisione per zero non consentita");
    });
%}

### 1.6 V2 Errore - Radice numero negativo
GET {{baseUrl}}/api/v2/calcola/get?operando1=-9&operando2=0&operatore=RADICE

> {%
    client.test("V2 Errore: Radice negativa", function() {
        client.assert(response.status === 400);
        client.assert(response.body.errore.includes("non consentita"));
    });
%}

### 2.2 POST Base - Sottrazione
POST {{baseUrl}}/api/calcola/post
Content-Type: application/json

{
  "operando1": 50,
  "operando2": 20,
  "operatore": "-"
}

> {%
    client.test("Base POST Sottrazione", function() {
        client.assert(response.status === 200);
        client.assert(response.body.risultato === 30);
    });
%}

### 3.1 Errore: Operatore Inesistente
GET {{baseUrl}}/api/v2/calcola/get?operando1=10&operando2=5&operatore=LOGARITMO

> {%
    client.test("Errore Operatore non valido", function() {
        client.assert(response.status === 400);
        client.assert(response.body.errore.includes("Operatore non valido"));
    });
%}

### 3.2 Errore: Body POST vuoto
POST {{baseUrl}}/api/calcola/post
Content-Type: application/json

{}

> {%
    client.test("Errore Body Vuoto", function() {
        client.assert(response.status === 400);
    });
%}